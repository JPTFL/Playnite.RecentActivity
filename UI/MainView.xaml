<PluginUserControl x:Class="RecentActivity.UI.MainView"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                   xmlns:converters="clr-namespace:RecentActivity.Converters"
                   mc:Ignorable="d"
                   d:DesignHeight="400" d:DesignWidth="600">
    <PluginUserControl.Resources>
        <converters:UriToBitmapImageConverter x:Key="UriToBitmapImageConverter" />
    </PluginUserControl.Resources>
    
    
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" /> <!-- Recent Activity Text -->
            <RowDefinition Height="Auto" /> <!-- Total Playtime Text -->
            <RowDefinition Height="*" /> <!-- ListBox (Fill remaining space) -->
        </Grid.RowDefinitions>
        
        
        <TextBlock Text="Recent Activity"
                   FontSize="24"
                   Foreground="White"
                   FontWeight="Bold"
                   Margin="0,0,0,10"
                   Grid.Row="0" />

        <!-- Total Playtime Header -->
        <TextBlock Text="{Binding TotalPlaytimeText}"
                   FontSize="16"
                   FontWeight="Bold"
                   Foreground="White"
                   Margin="0,0,0,10"
                   Grid.Row="1" />
        
        <ListBox ItemsSource="{Binding RecentActivityList}" Margin="0,0,0,0" Background="Transparent" Grid.Row="2">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" Margin="5">
                        <!-- Use a Grid to structure the layout with two columns -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <!-- Define two columns: one for the image and the other for text -->
                                <ColumnDefinition Width="75" /> <!-- Fixed width for the image -->
                                <ColumnDefinition Width="*" />  <!-- Remaining space for text -->
                            </Grid.ColumnDefinitions>

                            <!-- Cover Image in the first column -->
                            <Image Grid.Column="0" Width="75" Source="{Binding CoverImage,
                                                      Converter={StaticResource UriToBitmapImageConverter},
                                                      ConverterParameter=75,
                                                      Mode=OneWay}" 
                                   VerticalAlignment="Top" />

                            <!-- Text content in the second column -->
                            <StackPanel Grid.Column="1" Orientation="Vertical" Margin="5">
                                <TextBlock Text="{Binding Game.Name}" 
                                           FontWeight="Bold" 
                                           FontSize="16" 
                                           Margin="0,0,0,5" />
                                <TextBlock Text="{Binding FormattedPlaytime}" 
                                           FontSize="14" 
                                           Margin="0,0,0,2" />
                                <TextBlock Text="{Binding FormattedLastPlayed}" 
                                           FontSize="14" />
                            </StackPanel>
                        </Grid>

                        <!-- Separator between the items -->
                        <Separator Margin="0,10,0,0" />
                    </StackPanel>

                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ListBox>
    </Grid>
</PluginUserControl>
